!function(t){var n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(n){return t[n]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=9)}([function(t,n){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e},function(t,n,e){"use strict";e.r(n),e.d(n,"coinFieldEffect",function(){return v}),e.d(n,"Coin",function(){return g});var i=e(7),o=e.n(i),r=e(2),s=e.n(r),a=e(3),h=e.n(a),c=e(4),u=e.n(c),l=e(0),f=e.n(l),p=e(8),d=e.n(p),y=e(5),m=e.n(y),w=window.px.AnimatedSprite,x=0,b=0,v=function(t){var n=null,e={render:!0};return requestAnimationFrame(function i(o){if(e.render){if(!n)return n=o,void requestAnimationFrame(i);var r=(o-n)/10;n=o,x+=10*r*((b+=(.5-b)/20)+1),t.forEach(function(t){return t.animate()}),requestAnimationFrame(i)}}),e},g=function(t){function n(t){var e,i;return s()(this,n),(i=u()(this,(e=f()(n)).call.apply(e,[this].concat(o()(t))))).anchor.set(.5),i.pos={},i.randomize(!0),i}return m()(n,t),h()(n,[{key:"randomize",value:function(t){this.pos.z=t?2e3*Math.random():x+1e3*Math.random()+2e3;var n=Math.random()*Math.PI*2,e=50*Math.random()+1;this.pos.x=Math.cos(n)*e,this.pos.y=Math.sin(n)*e}},{key:"animate",value:function(){this.pos.z<x&&this.randomize();var t=this.pos.z-x;this.x=this.pos.x*(10/t)*1280+640,this.y=this.pos.y*(10/t)*1280+360;var n=this.x-640,e=this.y-360,i=Math.sqrt(n*n+e+e),o=Math.max(0,(2e3-t)/2e3);this.scale.x=1.5*o,this.scale.y=1.5*o+o*b*0*i/1280,this.rotation=Math.atan2(e,n)+Math.PI/2}},{key:"reset",value:function(){this.scale.x=0,this.scale.y=0,this.rotation=0,this.stop(),this.x=640,this.y=320}},{key:"hide",value:function(){this.reset(),this.randomize(!0),d()(f()(n.prototype),"hide",this).call(this)}}]),n}(w)},function(t,n){t.exports=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}},function(t,n){function e(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}},function(t,n,e){var i=e(13),o=e(6);t.exports=function(t,n){return!n||"object"!==i(n)&&"function"!=typeof n?o(t):n}},function(t,n,e){var i=e(15);t.exports=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}},function(t,n){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,n,e){var i=e(10),o=e(11),r=e(12);t.exports=function(t){return i(t)||o(t)||r()}},function(t,n,e){var i=e(14);function o(n,e,r){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=o=Reflect.get:t.exports=o=function(t,n,e){var o=i(t,n);if(o){var r=Object.getOwnPropertyDescriptor(o,n);return r.get?r.get.call(e):r.value}},o(n,e,r||n)}t.exports=o},function(t,n,e){e(1),e(16),t.exports=e(17)},function(t,n){t.exports=function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}},function(t,n){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(n){return"function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?t.exports=i=function(t){return e(t)}:t.exports=i=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},i(n)}t.exports=i},function(t,n,e){var i=e(0);t.exports=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=i(t)););return t}},function(t,n){function e(n,i){return t.exports=e=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},e(n,i)}t.exports=e},function(t,n){Number.prototype.toRad=function(){return this*Math.PI/180},Number.prototype.toDeg=function(){return 180*this/Math.PI}},function(t,n,e){"use strict";e.r(n);var i=e(2),o=e.n(i),r=e(3),s=e.n(r),a=e(4),h=e.n(a),c=e(0),u=e.n(c),l=e(6),f=e.n(l),p=e(5),d=e.n(p),y=e(1),m=window.px,w=m.Sprite,x=m.Container,b=m.AnimatedSprite,v=m.BitmapText,g=function(t){function n(){var t;return o()(this,n),(t=h()(this,u()(n).call(this))).loader=PIXI.loader,t.rotationTime=6,t.slicePrizes=[20,500,30,300,40,200,50,100,10,1e3],t.lightsCoords=11===t.slices?[{x:0,y:-291},{x:158,y:-245},{x:266,y:-120},{x:289,y:43},{x:221,y:192},{x:82,y:280},{x:-82,y:280},{x:-221,y:192},{x:-289,y:43},{x:-266,y:-120},{x:-158,y:-245}]:[{x:0,y:-291},{x:173,y:-236},{x:276,y:-96},{x:276,y:96},{x:173,y:236},{x:0,y:291},{x:-173,y:236},{x:-276,y:96},{x:-276,y:-96},{x:-173,y:-236}],t.preload(t.create.bind(f()(t))),t.interactive=!0,t.buttonMode=!0,t}return d()(n,t),s()(n,[{key:"preload",value:function(t){var n=this;[{key:"wheel",source:window.urls.cdn+"wheel-of-fortune/wof.json"},{key:"background",source:window.urls.cdn+"wheel-of-fortune/background.jpg"},{key:"you-win",source:window.urls.cdn+"wheel-of-fortune/animation/you-win.json"},{key:"panel-animation",source:window.urls.cdn+"wheel-of-fortune/animation/panel-animation.json"},{key:"coin-flip",source:window.urls.cdn+"wheel-of-fortune/animation/coin-flip.json"},{key:"wof-font",source:window.urls.cdn+"wheel-of-fortune/wof-font.xml"}].forEach(function(t){n.loader.resources[t.key]||n.loader.add(t.key,t.source)}),this.loader.load(),"function"==typeof t&&this.loader.onComplete.add(t)}},{key:"setUp",value:function(t){this.slicePrizes=10===t?[20,500,30,300,40,200,50,100,10,1e3]:[20,500,30,300,40,200,50,100,"?",10,1e3]}},{key:"create",value:function(){var t=this;this.addChild(w.fromImage("background")),this.addChild(new w("wheel-shade.png",640,380,2)).anchor.set(.5),this.srcLight=this.addChild(new w("source-light.png",640,360,2)).hide(),this.srcLight.anchor.set(.5),this.wheel=this.addChild(new w("spin-wheel-".concat(this.slices,".png"),640,360,2)),this.wheel.anchor.set(.5),this.winHl=this.addChild(new w("win-highlight-".concat(this.slices,".png"),0,0,3)).hide(),this.winHl.x=641,this.winHl.y=205,this.winHl.anchor.set(.5),this.pin=this.addChild(new w("pointer.png",640,35,4)),this.pin.anchor.set(.5,0),this.pin.bounce=new TimelineMax({paused:!0,ease:Power4.easeOut,onComplete:function(){return TweenMax.to(t.pin,.05,{rotation:0})}}).to(this.pin,.05,{rotation:-.15}).to(this.pin,.05,{rotation:.15}),this.pin.bounceReverse=new TimelineMax({paused:!0,ease:Power4.easeOut,onComplete:function(){return TweenMax.to(t.pin,.05,{rotation:0})}}).to(this.pin,.05,{rotation:.15}).to(this.pin,.05,{rotation:-.15}),this.centralFrame=this.addChild(new w("central-frame.png",0,0,4)),this.centralFrame.x=640-this.centralFrame.width/2,this.centralFrame.y=360-this.centralFrame.height/2,this.canSpin=!0,this.on("pointerdown",this.spinWheel,this),this.winAnimation=this.addChild(new b(this.loader.resources["you-win"].spritesheet.animations["win-frame"],640,250,5)).hide(),this.winAnimation.anchor.set(.5),this.winAnimation.animationSpeed=.3,this.panelAnimation=this.addChild(new b(this.loader.resources["panel-animation"].spritesheet.animations["panel-frame"],640,460,5,!0)).hide(),this.panelAnimation.anchor.set(.5),this.panelAnimation.animationSpeed=.4,this.winText=this.addChild(new v("",{font:"120px wof-font"},640,445,5)).hide(),this.coins=[];for(var n=0;n<50;n++)this.coins.push(this.addChild(new y.Coin([PIXI.loader.resources["coin-flip"].spritesheet.animations.coin,640,360,1,!0])));this.lights=[],this.lightsCoords.forEach(function(n){var e=n.x,i=n.y,o=t.wheel.addChild(new w("light.png",e,i,4));o.hide(),o.anchor.set(.5),t.lights.push(o)}),this.cache(),this.startup()}},{key:"startup",value:function(){var t=this,n=0;this.startUpHl=setInterval(function(){t.lights.forEach(function(t){return t.hide()}),t.lights[n].show(),++n===t.lights.length&&(n=0)},100)}},{key:"clear",value:function(){this.winHl.hide(),this.srcLight.hide(),this.winAnimation.hide(),this.winText.setText("").hide(),this.panelAnimation.hide(),clearInterval(this.flashingLights),this.lights.forEach(function(t){return t.hide()}),this.coins.forEach(function(t){return t.hide()}),this.coinsEffect&&(this.coinsEffect.render=!1),this.canSpin=!0,this.interactive=!0}},{key:"spinWheel",value:function(){var t=this;if(this.canSpin){clearInterval(this.startUpHl),this.lights.forEach(function(t){return t.hide()}),this.canSpin=!1,this.interactive=!1;var n=Math.floor(Math.random()*this.slicePrizes.length);this.prize=this.slicePrizes[n];var e=(1440+(this.slices-n)*(360/this.slices)).toRad(),i=(360/this.slices).toRad();this.wheel.rotation=0;var o=0,r=this,s=TweenMax.to(this.wheel,this.rotationTime,{paused:!0,rotation:e,ease:Power3.easeOut,onUpdate:function(){parseInt((this.target.rotation+i/2).toDeg())>=i.toDeg()*o&&(r.pin.bounce.restart(),o++)},onComplete:function(){t.showWin()}});TweenMax.to(this.wheel,.5,{rotation:-2,ease:Power1.easeOut,onUpdate:function(){parseInt((this.target.rotation+i/2).toDeg())<=i.toDeg()*o&&(r.pin.bounceReverse.restart(),o--)},onComplete:function(){o++,s.play()}})}}},{key:"show",value:function(){this.clear(),this.alpha=1,this.visible=!0}},{key:"showWin",value:function(){var t=this;this.winAnimation.zOrder=5,this.panelAnimation.zOrder=5,this.sortChildren();setTimeout(this.winHl.show.bind(this.winHl),100),setTimeout(this.winHl.hide.bind(this.winHl),300),setTimeout(this.winHl.show.bind(this.winHl),500),setTimeout(this.winHl.hide.bind(this.winHl),700),setTimeout(this.winHl.show.bind(this.winHl),900),this.flashingLights=setInterval(function(){t.lights.forEach(function(t){return t.visible?t.hide():t.show()})},200),setTimeout(function(){isNaN(t.prize)||(t.winText.setText(t.prize.toFixed(2)),t.winText.fadeIn(),t.panelAnimation.fadeIn(),t.panelAnimation.play()),t.winAnimation.fadeIn(),t.winAnimation.play(),t.srcLight.fadeIn({duration:.5}),t.coins.forEach(function(t){return t.play()}),t.coins.forEach(function(t){return t.fadeIn()}),t.coinsEffect=Object(y.coinFieldEffect)(t.coins),t.interactive=!0,t.once("pointerup",function(){t.fadeOut(),t.emit("hide")})}.bind(this),1100)}},{key:"cache",value:function(){var t=this;this.winAnimation.zOrder=.1,this.panelAnimation.zOrder=.1,this.sortChildren(),this.winAnimation.play(),this.panelAnimation.loop=!1,this.panelAnimation.play(),this.winAnimation.onComplete=function(){t.winAnimation.hide(),t.winAnimation.onComplete=null},this.panelAnimation.onComplete=function(){t.panelAnimation.hide(),t.panelAnimation.loop=!0,t.panelAnimation.onComplete=null}}},{key:"slices",get:function(){return this.slicePrizes.length}}]),n}(x);window.WheelOfFortune=g}]);